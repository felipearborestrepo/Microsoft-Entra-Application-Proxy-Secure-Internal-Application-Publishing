# Microsoft Entra Application Proxy â€” Secure Internal Application Publishing

<img width="1536" height="1024" alt="ChatGPT Image Feb 15, 2026 at 12_35_35 AM" src="https://github.com/user-attachments/assets/c4ba0bdc-76a3-496b-9e90-d88ea86e5a47" />

## Project Overview

This lab documents the process of publishing an internal web application using Microsoft Entra Application Proxy to enable secure remote access without exposing the server directly to the internet.

The objective was to simulate a real-world scenario where an internal application must be accessible externally while enforcing identity-based access controls. Instead of relying on VPN or opening inbound firewall ports, access is brokered through Microsoft Entra with pre-authentication and Conditional Access enforcement.

The project demonstrates how identity can be used as the primary security boundary when exposing internal resources.

---

## Lab Environment

- Microsoft Entra ID tenant
- Azure Windows Server 2022 virtual machine
- IIS web server hosting internal test application
- Application Proxy connector installed on the server
- Security group used for access assignment
- Conditional Access policy enforcing multi-factor authentication

---

## Environment Build

A Windows Server virtual machine was deployed in Azure to act as the internal resource. After connecting through Remote Desktop, IIS was installed to host a simple internal site used as the application being published.

The default IIS page was used to simulate an internal portal, and local connectivity was verified to confirm the application responded correctly before moving forward.

![Image 2-14-26 at 23 33](https://github.com/user-attachments/assets/ca18a0f8-2a00-489c-a700-228950c64423)

![Image 2-14-26 at 23 38](https://github.com/user-attachments/assets/f6c1227a-31da-461d-8d7a-6da45f4f630f)

![Image 2-14-26 at 23 41](https://github.com/user-attachments/assets/498b4d9f-cd23-410b-909e-58c160c5cf2d)

![Image 2-14-26 at 23 42](https://github.com/user-attachments/assets/926d6d2c-ce11-462d-a798-c18261d2db87)

![Image 2-14-26 at 23 43](https://github.com/user-attachments/assets/aba94c6c-a76f-4064-ad86-3d63e1e97e4d)

---

## Application Proxy Configuration

Application Proxy was enabled in Microsoft Entra to allow publishing of internal resources through secure outbound connector communication. This approach avoids exposing internal infrastructure directly and aligns with Zero Trust architecture principles.

![Image 2-14-26 at 23 46](https://github.com/user-attachments/assets/44ac6c1a-1f96-45e4-be02-d2d0d1b02de2)

---

## Connector Deployment

The Application Proxy connector was installed on the server hosting the IIS site. After installation, the connector successfully registered with the tenant and appeared as active within the connector group.

This confirmed that secure outbound communication between the server and Microsoft Entra was established.

![Image 2-14-26 at 23 48](https://github.com/user-attachments/assets/bb120901-8139-4fc3-b113-21864da3d1ac)

![Image 2-14-26 at 23 51](https://github.com/user-attachments/assets/22662e1d-f744-4966-a565-88cb647f6be0)

![Image 2-14-26 at 23 52](https://github.com/user-attachments/assets/6f35f6ae-3fc2-45a9-b01d-73169ef04d2e)

---

## Application Publishing

An enterprise application entry was created and configured to publish the internal IIS site.

Configuration included:

- Internal URL mapped to the local web application
- External URL generated by Microsoft Entra
- Pre-authentication set to Microsoft Entra ID

With this configuration, users must authenticate before traffic is allowed to reach the application.

![Image 2-14-26 at 23 54](https://github.com/user-attachments/assets/eb0acd14-b3ab-4282-9afd-4b22adc5e5b3)

![Image 2-14-26 at 23 55](https://github.com/user-attachments/assets/d3a30319-ab2a-4735-9d0e-0f0f39295b77)

---

## Access Assignment

A dedicated security group was created to manage user access. Users were assigned through the group rather than directly to the application, reflecting enterprise access governance practices.

After assignment, the application became available to authorized users through the access portal.

![Image 2-14-26 at 23 59](https://github.com/user-attachments/assets/235cc190-bd84-4917-9e04-45b6d485e7d6)

![Image 2-15-26 at 00 02](https://github.com/user-attachments/assets/0241a047-6bc7-4c0b-b536-75d0b28fe0b2)

---

## External Access Validation

Testing was performed from outside the server environment to simulate real user access.

When navigating to the external URL, users were redirected to the Microsoft Entra sign-in page. After successful authentication, traffic was securely proxied to the internal IIS site, confirming the publishing configuration was functioning as expected.

![Image 2-15-26 at 00 05](https://github.com/user-attachments/assets/0f153381-cd61-4010-8a4a-30ec46420def)

![Image 2-15-26 at 00 22](https://github.com/user-attachments/assets/eafb1759-ed53-48b2-8fde-dacc632fe5c3)

---

## Conditional Access Enforcement

A Conditional Access policy was created targeting the published application and requiring multi-factor authentication.

Testing confirmed that users were prompted for MFA before being granted access, demonstrating policy enforcement.

![Image 2-15-26 at 00 24](https://github.com/user-attachments/assets/5cbc0c58-76d6-42be-b34c-672588819dfc)

![Image 2-15-26 at 00 25](https://github.com/user-attachments/assets/207bce49-4cd3-4949-81d5-3e27d24df55f)

![Image 2-15-26 at 00 26](https://github.com/user-attachments/assets/c415b4cf-07e3-4f12-9acd-8747cb690d70)

---
## External login again with MFA enforced

Signed in again, but with the Conditional Access policy working by being requested to use MFA.

![Image 2-15-26 at 00 27](https://github.com/user-attachments/assets/d2b09254-5fcf-489d-b239-281c33ba592f)

![Image 2-15-26 at 00 27 (1)](https://github.com/user-attachments/assets/4359fcf9-5dac-48cc-b32b-e1fb7247ac07)

![Image 2-15-26 at 00 27 (2)](https://github.com/user-attachments/assets/2d2d4faa-7293-4da8-a675-4158e921b702)

![Image 2-15-26 at 00 28](https://github.com/user-attachments/assets/b8b1313c-44a1-4270-ab4c-25a2fa0cf6ea)

![Image 2-15-26 at 00 28 (1)](https://github.com/user-attachments/assets/d50713d4-7796-439d-9382-547366b17d90)

## Monitoring and Verification

Sign-in logs were reviewed to confirm:

- Application access activity
- Conditional Access policy evaluation
- MFA enforcement
- Successful authentication events

This provided validation that access was being controlled and audited correctly.

![Image 2-15-26 at 00 37](https://github.com/user-attachments/assets/fddd932a-ed3b-4a5e-9fbb-83a62c6e5267)

![Image 2-15-26 at 00 37 (1)](https://github.com/user-attachments/assets/838a123d-8868-4ede-9548-dc77f1e78c54)

